# ip-shaper

ip-shaper - Сервис установки приоритетов и ограничения скорости входящего и исходящего трафика.
Исходящий трафик фильтруется по IP-адресу назначения
для установки и использования нужно добавить скрипт в */etc/init.d/*

`` # cp ip-shaper /etc/init.d/ ``

`` # chmod +x /etc/init.d/ip-shaper``

Также необходимо задать значения переменным:
```
DEV - интерфейс на котором нужно установить ограничения
RATEUP - требуемое ограничение скорости исходящего трафика
RATEDN - требуемое ограничение скорости входящего tcp трафика
RATEAPP - требуемое ограничение скорости исходящего трафика для определенного ip
IPDST - адрес для которого режем исходящую скорость
RATEAPPMAX - максимально возможная скорость для трафика ограниченного $RATEAPP
RATEEND - $[$RATEUP - $RATEAPP]
BRSIN(OUT) - длина буфера очереди в байтах, примерное значение
вычисляется по формуле:
normal burst = configured rate * (1 byte)/(8 bits) * 1.5 seconds
extended burst = 2 * normal burst
```

Скорость исходящего трафика ограничивается до значения установленного в $RATEAPP, но если оставшаяся полоса свободна,
скорость увеличивается до значения установленного в $RATEAPPMAX
